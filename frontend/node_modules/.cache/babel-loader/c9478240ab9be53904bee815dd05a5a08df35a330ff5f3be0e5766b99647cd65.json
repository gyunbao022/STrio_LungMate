{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\uAC15\\uC7581_22\\\\Desktop\\\\STrio_LungMate\\\\frontend\\\\src\\\\pages\\\\DiagnosisList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:8000\";\nexport default function Diagnosis() {\n  _s();\n  var _result$images2, _result$images3;\n  const [file, setFile] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const [result, setResult] = useState(null);\n  const [diagnosis, setDiagnosis] = useState(\"\");\n  const [doctorNotes, setDoctorNotes] = useState(\"\");\n  const [llmSummary, setLlmSummary] = useState(\"\");\n  const [saving, setSaving] = useState(false);\n  const [savedData, setSavedData] = useState(null);\n  const fileInputRef = useRef(null);\n  const handleFile = e => {\n    var _e$target$files;\n    const f = ((_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0]) || null;\n    setFile(f);\n    setResult(null);\n    setErrorMsg(\"\");\n    setDiagnosis(\"\");\n    setDoctorNotes(\"\");\n    setLlmSummary(\"\");\n  };\n  const handleAnalyze = async () => {\n    if (!file) {\n      setErrorMsg(\"엑스레이 이미지를 업로드해 주세요.\");\n      return;\n    }\n    setLoading(true);\n    setErrorMsg(\"\");\n    setResult(null);\n    setLlmSummary(\"\");\n    try {\n      const form = new FormData();\n      form.append(\"file\", file);\n      const res = await fetch(`${API_BASE}/api/analyze`, {\n        method: \"POST\",\n        body: form\n      });\n      const data = await res.json().catch(() => null);\n      if (!res.ok || !(data !== null && data !== void 0 && data.ok)) {\n        throw new Error((data === null || data === void 0 ? void 0 : data.error) || `HTTP ${res.status}`);\n      }\n      setResult(data);\n      setDiagnosis(data !== null && data !== void 0 && data.pred_label ? `모델 판독: ${data.pred_label} (P=${data.pred_prob})` : \"\");\n    } catch (err) {\n      setErrorMsg((err === null || err === void 0 ? void 0 : err.message) || \"분석 중 오류가 발생했습니다.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleLLMSummarize = async () => {\n    if (!result) {\n      setErrorMsg(\"먼저 이미지를 분석해 주세요.\");\n      return;\n    }\n    setErrorMsg(\"\");\n    setLlmSummary(\"요약 생성 중…\");\n    try {\n      var _result$images;\n      const res = await fetch(`${API_BASE}/api/llm-summarize`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          pred_label: result.pred_label,\n          pred_prob: result.pred_prob,\n          image_data_url: (_result$images = result.images) === null || _result$images === void 0 ? void 0 : _result$images.original // ← 이 줄만 추가 (앞의 + 제거)\n        })\n      });\n      const data = await res.json().catch(() => null);\n      if (!res.ok || !(data !== null && data !== void 0 && data.ok)) {\n        throw new Error((data === null || data === void 0 ? void 0 : data.error) || `HTTP ${res.status}`);\n      }\n      setLlmSummary(data.summary || \"\");\n      if (!doctorNotes) setDoctorNotes(data.summary || \"\");\n    } catch (err) {\n      setErrorMsg((err === null || err === void 0 ? void 0 : err.message) || \"LLM 요약 중 오류가 발생했습니다.\");\n      setLlmSummary(\"\");\n    }\n  };\n  const handleSave = async () => {\n    if (!diagnosis || !doctorNotes) {\n      setErrorMsg(\"진단 내용과 의사 소견을 모두 입력해 주세요.\");\n      return;\n    }\n    setSaving(true);\n    setErrorMsg(\"\");\n    try {\n      const res = await fetch(`${API_BASE}/api/update-diagnosis`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          diagnosis,\n          doctor_notes: doctorNotes,\n          meta: {\n            pred_label: result === null || result === void 0 ? void 0 : result.pred_label,\n            pred_prob: result === null || result === void 0 ? void 0 : result.pred_prob,\n            threshold_used: result === null || result === void 0 ? void 0 : result.threshold_used,\n            target_layer_used: result === null || result === void 0 ? void 0 : result.target_layer_used\n          }\n        })\n      });\n      const data = await res.json().catch(() => null);\n      if (!res.ok || !(data !== null && data !== void 0 && data.ok)) {\n        throw new Error((data === null || data === void 0 ? void 0 : data.error) || `HTTP ${res.status}`);\n      }\n      setSavedData(data.data);\n      alert(\"진단 내용이 성공적으로 저장되었습니다.\");\n    } catch (err) {\n      setErrorMsg((err === null || err === void 0 ? void 0 : err.message) || \"저장 중 오류가 발생했습니다.\");\n    } finally {\n      setSaving(false);\n    }\n  };\n  const handleLoadSavedData = () => {\n    if (savedData) {\n      setDiagnosis(savedData.diagnosis || \"\");\n      setDoctorNotes(savedData.doctor_notes || \"\");\n    } else {\n      setErrorMsg(\"저장된 데이터가 없습니다.\");\n    }\n  };\n  const resetForm = () => {\n    setFile(null);\n    if (fileInputRef.current) fileInputRef.current.value = \"\";\n    setResult(null);\n    setErrorMsg(\"\");\n    setDiagnosis(\"\");\n    setDoctorNotes(\"\");\n    setLlmSummary(\"\");\n    setSavedData(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-[#1a202c] text-white p-8 rounded-lg min-h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold mb-6\",\n      children: \"\\uD3D0\\uB834 \\uBD84\\uB958 \\xB7 Grad-CAM \\uD310\\uB3C5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-[#2d3748] rounded-xl p-6 shadow\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold mb-4\",\n          children: \"\\uC785\\uB825\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm text-gray-300 mb-2\",\n          children: \"\\uC5D1\\uC2A4\\uB808\\uC774 \\uC774\\uBBF8\\uC9C0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileInputRef,\n          type: \"file\",\n          accept: \"image/*\",\n          onChange: handleFile,\n          className: \"w-full file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-cyan-600 file:text-white hover:file:bg-cyan-700 cursor-pointer bg-[#1a202c] text-sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 flex gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAnalyze,\n            disabled: loading,\n            className: \"bg-cyan-600 hover:bg-cyan-700 disabled:opacity-60 px-4 py-2 rounded-lg font-semibold\",\n            children: loading ? \"분석 중…\" : \"분석하기\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: resetForm,\n            className: \"bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg\",\n            children: \"\\uCD08\\uAE30\\uD654\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this), errorMsg && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-4 text-sm text-red-300\",\n          children: [\"\\u26A0 \", errorMsg]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-[#2d3748] rounded-xl p-6 shadow lg:col-span-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold mb-4\",\n          children: \"\\uACB0\\uACFC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), !result ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-400\",\n          children: \"\\uBD84\\uC11D \\uACB0\\uACFC\\uAC00 \\uC5EC\\uAE30\\uC5D0 \\uD45C\\uC2DC\\uB429\\uB2C8\\uB2E4.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-3 text-sm mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-[#1f2733] p-3 rounded\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-gray-300\",\n                children: \"Pred Label\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-semibold\",\n                children: result.pred_label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-[#1f2733] p-3 rounded\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-gray-300\",\n                children: \"Pred Prob\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-semibold\",\n                children: result.pred_prob\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-[#1f2733] p-3 rounded\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-gray-300\",\n                children: \"Threshold\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-semibold\",\n                children: result.threshold_used\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-[#1f2733] p-3 rounded\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-gray-300\",\n                children: \"Grad-CAM Layer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-semibold\",\n                children: result.target_layer_used\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-300 mb-2\",\n                children: \"Original\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: (_result$images2 = result.images) === null || _result$images2 === void 0 ? void 0 : _result$images2.original,\n                alt: \"original\",\n                className: \"rounded-lg w-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-300 mb-2\",\n                children: \"Overlay\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: (_result$images3 = result.images) === null || _result$images3 === void 0 ? void 0 : _result$images3.overlay,\n                alt: \"overlay\",\n                className: \"rounded-lg w-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm text-gray-300 mb-2\",\n              children: \"\\uC9C4\\uB2E8 \\uACB0\\uACFC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: diagnosis,\n              onChange: e => setDiagnosis(e.target.value),\n              className: \"w-full bg-[#1a202c] border border-gray-600 rounded px-4 py-2 text-sm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm text-gray-300\",\n                children: \"\\uC758\\uC0AC \\uC18C\\uACAC\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleLLMSummarize,\n                className: \"text-xs bg-indigo-600 hover:bg-indigo-700 px-3 py-1 rounded\",\n                title: \"LLM\\uC73C\\uB85C \\uC694\\uC57D \\uCD08\\uC548 \\uC0DD\\uC131\",\n                children: \"LLM \\uC694\\uC57D \\uB9CC\\uB4E4\\uAE30\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 17\n            }, this), !!llmSummary && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-300 bg-[#1f2733] p-3 rounded mb-2 whitespace-pre-wrap\",\n              children: llmSummary\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: doctorNotes,\n              onChange: e => setDoctorNotes(e.target.value),\n              className: \"w-full bg-[#1a202c] border border-gray-600 rounded px-4 py-2 text-sm\",\n              rows: \"5\",\n              placeholder: \"\\uC758\\uC0AC \\uC18C\\uACAC\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\\u2026 (LLM \\uCD08\\uC548\\uC744 \\uCC38\\uACE0\\uD558\\uC5EC \\uC218\\uC815)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSave,\n              disabled: saving,\n              className: \"bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg font-semibold disabled:opacity-60\",\n              children: saving ? \"저장 중…\" : \"저장하기\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleLoadSavedData,\n              className: \"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-semibold\",\n              children: \"\\uC800\\uC7A5\\uB41C \\uB370\\uC774\\uD130 \\uBD88\\uB7EC\\uC624\\uAE30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 5\n  }, this);\n}\n_s(Diagnosis, \"9onTW4hldApCVddabPJVGjFVfZg=\");\n_c = Diagnosis;\nvar _c;\n$RefreshReg$(_c, \"Diagnosis\");","map":{"version":3,"names":["React","useState","useRef","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE","process","env","REACT_APP_API_BASE","Diagnosis","_s","_result$images2","_result$images3","file","setFile","loading","setLoading","errorMsg","setErrorMsg","result","setResult","diagnosis","setDiagnosis","doctorNotes","setDoctorNotes","llmSummary","setLlmSummary","saving","setSaving","savedData","setSavedData","fileInputRef","handleFile","e","_e$target$files","f","target","files","handleAnalyze","form","FormData","append","res","fetch","method","body","data","json","catch","ok","Error","error","status","pred_label","pred_prob","err","message","handleLLMSummarize","_result$images","headers","JSON","stringify","image_data_url","images","original","summary","handleSave","doctor_notes","meta","threshold_used","target_layer_used","alert","handleLoadSavedData","resetForm","current","value","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","type","accept","onChange","onClick","disabled","src","alt","overlay","title","rows","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/강의1_22/Desktop/STrio_LungMate/frontend/src/pages/DiagnosisList.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\r\n\r\nconst API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:8000\";\r\n\r\nexport default function Diagnosis() {\r\n  const [file, setFile] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n  const [result, setResult] = useState(null);\r\n\r\n  const [diagnosis, setDiagnosis] = useState(\"\");\r\n  const [doctorNotes, setDoctorNotes] = useState(\"\");\r\n  const [llmSummary, setLlmSummary] = useState(\"\");\r\n  const [saving, setSaving] = useState(false);\r\n  const [savedData, setSavedData] = useState(null);\r\n\r\n  const fileInputRef = useRef(null);\r\n\r\n  const handleFile = (e) => {\r\n    const f = e.target.files?.[0] || null;\r\n    setFile(f);\r\n    setResult(null);\r\n    setErrorMsg(\"\");\r\n    setDiagnosis(\"\");\r\n    setDoctorNotes(\"\");\r\n    setLlmSummary(\"\");\r\n  };\r\n\r\n  const handleAnalyze = async () => {\r\n    if (!file) {\r\n      setErrorMsg(\"엑스레이 이미지를 업로드해 주세요.\");\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    setErrorMsg(\"\");\r\n    setResult(null);\r\n    setLlmSummary(\"\");\r\n\r\n    try {\r\n      const form = new FormData();\r\n      form.append(\"file\", file);\r\n\r\n      const res = await fetch(`${API_BASE}/api/analyze`, {\r\n        method: \"POST\",\r\n        body: form,\r\n      });\r\n\r\n      const data = await res.json().catch(() => null);\r\n      if (!res.ok || !data?.ok) {\r\n        throw new Error(data?.error || `HTTP ${res.status}`);\r\n      }\r\n\r\n      setResult(data);\r\n      setDiagnosis(\r\n        data?.pred_label\r\n          ? `모델 판독: ${data.pred_label} (P=${data.pred_prob})`\r\n          : \"\"\r\n      );\r\n    } catch (err) {\r\n      setErrorMsg(err?.message || \"분석 중 오류가 발생했습니다.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLLMSummarize = async () => {\r\n    if (!result) {\r\n      setErrorMsg(\"먼저 이미지를 분석해 주세요.\");\r\n      return;\r\n    }\r\n    setErrorMsg(\"\");\r\n    setLlmSummary(\"요약 생성 중…\");\r\n\r\n    try {\r\n      const res = await fetch(`${API_BASE}/api/llm-summarize`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          pred_label: result.pred_label,\r\n          pred_prob: result.pred_prob,\r\n          image_data_url: result.images?.original, // ← 이 줄만 추가 (앞의 + 제거)\r\n        }),\r\n      });\r\n\r\n      const data = await res.json().catch(() => null);\r\n      if (!res.ok || !data?.ok) {\r\n        throw new Error(data?.error || `HTTP ${res.status}`);\r\n      }\r\n      setLlmSummary(data.summary || \"\");\r\n      if (!doctorNotes) setDoctorNotes(data.summary || \"\");\r\n    } catch (err) {\r\n      setErrorMsg(err?.message || \"LLM 요약 중 오류가 발생했습니다.\");\r\n      setLlmSummary(\"\");\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!diagnosis || !doctorNotes) {\r\n      setErrorMsg(\"진단 내용과 의사 소견을 모두 입력해 주세요.\");\r\n      return;\r\n    }\r\n    setSaving(true);\r\n    setErrorMsg(\"\");\r\n\r\n    try {\r\n      const res = await fetch(`${API_BASE}/api/update-diagnosis`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          diagnosis,\r\n          doctor_notes: doctorNotes,\r\n          meta: {\r\n            pred_label: result?.pred_label,\r\n            pred_prob: result?.pred_prob,\r\n            threshold_used: result?.threshold_used,\r\n            target_layer_used: result?.target_layer_used,\r\n          },\r\n        }),\r\n      });\r\n      const data = await res.json().catch(() => null);\r\n      if (!res.ok || !data?.ok) {\r\n        throw new Error(data?.error || `HTTP ${res.status}`);\r\n      }\r\n      setSavedData(data.data);\r\n      alert(\"진단 내용이 성공적으로 저장되었습니다.\");\r\n    } catch (err) {\r\n      setErrorMsg(err?.message || \"저장 중 오류가 발생했습니다.\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleLoadSavedData = () => {\r\n    if (savedData) {\r\n      setDiagnosis(savedData.diagnosis || \"\");\r\n      setDoctorNotes(savedData.doctor_notes || \"\");\r\n    } else {\r\n      setErrorMsg(\"저장된 데이터가 없습니다.\");\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFile(null);\r\n    if (fileInputRef.current) fileInputRef.current.value = \"\";\r\n    setResult(null);\r\n    setErrorMsg(\"\");\r\n    setDiagnosis(\"\");\r\n    setDoctorNotes(\"\");\r\n    setLlmSummary(\"\");\r\n    setSavedData(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-[#1a202c] text-white p-8 rounded-lg min-h-screen\">\r\n      <h1 className=\"text-2xl font-bold mb-6\">폐렴 분류 · Grad-CAM 판독</h1>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8\">\r\n        {/* 입력 */}\r\n        <div className=\"bg-[#2d3748] rounded-xl p-6 shadow\">\r\n          <h2 className=\"text-lg font-semibold mb-4\">입력</h2>\r\n\r\n          <label className=\"block text-sm text-gray-300 mb-2\">\r\n            엑스레이 이미지\r\n          </label>\r\n          <input\r\n            ref={fileInputRef}\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            onChange={handleFile}\r\n            className=\"w-full file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-cyan-600 file:text-white hover:file:bg-cyan-700 cursor-pointer bg-[#1a202c] text-sm\"\r\n          />\r\n\r\n          <div className=\"mt-6 flex gap-3\">\r\n            <button\r\n              onClick={handleAnalyze}\r\n              disabled={loading}\r\n              className=\"bg-cyan-600 hover:bg-cyan-700 disabled:opacity-60 px-4 py-2 rounded-lg font-semibold\"\r\n            >\r\n              {loading ? \"분석 중…\" : \"분석하기\"}\r\n            </button>\r\n            <button\r\n              onClick={resetForm}\r\n              className=\"bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg\"\r\n            >\r\n              초기화\r\n            </button>\r\n          </div>\r\n\r\n          {errorMsg && (\r\n            <p className=\"mt-4 text-sm text-red-300\">⚠ {errorMsg}</p>\r\n          )}\r\n        </div>\r\n\r\n        {/* 결과 */}\r\n        <div className=\"bg-[#2d3748] rounded-xl p-6 shadow lg:col-span-2\">\r\n          <h2 className=\"text-lg font-semibold mb-4\">결과</h2>\r\n\r\n          {!result ? (\r\n            <p className=\"text-gray-400\">분석 결과가 여기에 표시됩니다.</p>\r\n          ) : (\r\n            <>\r\n              {/* 모델 출력 메타 */}\r\n              <div className=\"grid grid-cols-2 gap-3 text-sm mb-4\">\r\n                <div className=\"bg-[#1f2733] p-3 rounded\">\r\n                  <div className=\"text-gray-300\">Pred Label</div>\r\n                  <div className=\"font-semibold\">{result.pred_label}</div>\r\n                </div>\r\n                <div className=\"bg-[#1f2733] p-3 rounded\">\r\n                  <div className=\"text-gray-300\">Pred Prob</div>\r\n                  <div className=\"font-semibold\">{result.pred_prob}</div>\r\n                </div>\r\n                <div className=\"bg-[#1f2733] p-3 rounded\">\r\n                  <div className=\"text-gray-300\">Threshold</div>\r\n                  <div className=\"font-semibold\">{result.threshold_used}</div>\r\n                </div>\r\n                <div className=\"bg-[#1f2733] p-3 rounded\">\r\n                  <div className=\"text-gray-300\">Grad-CAM Layer</div>\r\n                  <div className=\"font-semibold\">\r\n                    {result.target_layer_used}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* 이미지 2종 */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n                <div>\r\n                  <div className=\"text-sm text-gray-300 mb-2\">Original</div>\r\n                  <img\r\n                    src={result.images?.original}\r\n                    alt=\"original\"\r\n                    className=\"rounded-lg w-full\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div className=\"text-sm text-gray-300 mb-2\">Overlay</div>\r\n                  <img\r\n                    src={result.images?.overlay}\r\n                    alt=\"overlay\"\r\n                    className=\"rounded-lg w-full\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* 진단/소견 */}\r\n              <div className=\"mb-4\">\r\n                <label className=\"block text-sm text-gray-300 mb-2\">\r\n                  진단 결과\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={diagnosis}\r\n                  onChange={(e) => setDiagnosis(e.target.value)}\r\n                  className=\"w-full bg-[#1a202c] border border-gray-600 rounded px-4 py-2 text-sm\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"mb-4\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <label className=\"block text-sm text-gray-300\">\r\n                    의사 소견\r\n                  </label>\r\n                  <button\r\n                    onClick={handleLLMSummarize}\r\n                    className=\"text-xs bg-indigo-600 hover:bg-indigo-700 px-3 py-1 rounded\"\r\n                    title=\"LLM으로 요약 초안 생성\"\r\n                  >\r\n                    LLM 요약 만들기\r\n                  </button>\r\n                </div>\r\n                {!!llmSummary && (\r\n                  <div className=\"text-xs text-gray-300 bg-[#1f2733] p-3 rounded mb-2 whitespace-pre-wrap\">\r\n                    {llmSummary}\r\n                  </div>\r\n                )}\r\n                <textarea\r\n                  value={doctorNotes}\r\n                  onChange={(e) => setDoctorNotes(e.target.value)}\r\n                  className=\"w-full bg-[#1a202c] border border-gray-600 rounded px-4 py-2 text-sm\"\r\n                  rows=\"5\"\r\n                  placeholder=\"의사 소견을 입력하세요… (LLM 초안을 참고하여 수정)\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  onClick={handleSave}\r\n                  disabled={saving}\r\n                  className=\"bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg font-semibold disabled:opacity-60\"\r\n                >\r\n                  {saving ? \"저장 중…\" : \"저장하기\"}\r\n                </button>\r\n                <button\r\n                  onClick={handleLoadSavedData}\r\n                  className=\"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-semibold\"\r\n                >\r\n                  저장된 데이터 불러오기\r\n                </button>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}